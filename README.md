# WiseInterceptors

This project implements some C# interceptors using Castle Dynamic Proxy and AutoFac

For more information about AOP please follow this video http://channel9.msdn.com/Events/GOTO/GOTO-2011-Copenhagen/CPH-Aspect-Oriented-Programming-with-Dependency-Injection by Mark Seeman.

Currently we have implemented:

 1. A circuit breaker interceptor. 
 
 2. A cache interceptor.

 3. A method validation interceptor.

 4. A logger interceptor

The goal is to have a complete suite of easily configurable interceptors as a starter kit for enterprise projects.

How to use the cache interceptor
================================

The cache interceptor applies the caching algorithm proposed here: https://happinessdd.wordpress.com/2014/11/06/a-new-solution-for-the-cache-stampede-problem/.

It's also possible to save cached data in a persistent storage in order to be tolerant to database failures.

To apply a cache interceptor to a method please give a look at the CacheDemo project.

In the Program.cs file the function BuildContainer registers the types with Autofac and applies the cache interceptor to the virtual methods of the class TimeGetter (in our case just the function Now).

The Cache class takes the cache settings by the Form1 class. The cachekey is hardcoded as we are only caching one method. In real code the cachekey can be left empty so it's automatically generated by the library according to the method parameters' value, or can be provided by the custom class implemented in the client code.

